# Right justify text to $width characters columns.
# rjustify( text, width )
ALIAS rjustify {
	assign IRCII.word $1
	if ( @IRCII.word < [$0] )
		{ assign function_return $([-$0]1) }
		{ assign function_return $1 }
}

# Left justify text to $width characters columns.
# ljustify( text, width )
ALIAS ljustify {
	assign IRCII.word $1
	if ( @IRCII.word < [$0] )
		{ assign function_return $(1[+$0]) }
		{ assign function_return $1 }
}

# Drop a timestamp with the date into the MSGS window twice a day.  This is
# because nothing else ends up in that log with a date in it.
on ^timer 00:00 {
	xecho -WINDOW MSGs [$stime($time())]
	xecho -WINDOW CRAP [$stime($time())]
	xecho -WINDOW MARKLAR [$stime($time())]
	xecho -WINDOW SRH [$stime($time())]
}
on ^timer 12:00 {
	xecho -WINDOW MSGs [$stime($time())]
	xecho -WINDOW CRAP [$stime($time())]
	xecho -WINDOW MARKLAR [$stime($time())]
	xecho -WINDOW SRH [$stime($time())]
}


# Change the notification output when someone signs on, joins a channel,
# leaves, etc.
#
on ^NOTIFY_SIGNON * ECHO [$stime($time())] Signon by $0 detected
on ^NOTIFY_SIGNOFF * ECHO [$stime($time())] Signoff by $0 detected
on ^CHANNEL_SIGNOFF * ECHO [$stime($time())] Signoff: $1 on $0 \($2-\)
on ^JOIN * ECHO [$stime($time())] $0 has joined $1
on ^LEAVE * if ([$2])
	{ ECHO [$stime($time())] $0 has left $1 \($2-\) }
	{ ECHO [$stime($time())] $0 has left $1 }
on ^KICK * if ([$3])
	{ ECHO [$stime($time())] $0 has been kicked off $2 by $1 \($3-\) }
	{ ECHO [$stime($time())] $0 has been kicked off $2 by $1 }

# Nick and mode changes
#
on ^CHANNEL_NICK * ECHO [$stime($time())] $1 is now known as $2
on ^MODE * ECHO [$stime($time())] Mode change "$2-" by $0 on $1

# Server notices n' other important stuff
#
on ^SERVER_NOTICE * ECHO [$stime($time())] $1 $2-
on ^TOPIC * ECHO [$stime($time())] $0 has changed the topic on $1 to "$2-"
on ^WHO * ECHO [$stime($time())] $0 $rjustify(10 $1) $rjustify(3 $2) \($5\) $rjustify(30 $3@$4) \($6-\)
on ^CTCP_REPLY * ECHO [$stime($time())] CTCP REPLY $1 from $0: $2-
# on ^CTCP * if( $1 == $N )
#	 { ECHO [$stime($time())] CTCP $2 from $0 to $1 \($3-\) }
#	 { ECHO [$stime($time())] CTCP $2 from $0 to $1 }
#	{ if( $3 )
#		 { ECHO [$stime($time())] CTCP $2 from $0 \($3-\) }
#		 { ECHO [$stime($time())] CTCP $2 from $0 }
#	}
#	{ if( $3 )
#		 { ECHO [$stime($time())] CTCP $2 from $0 to $1 \($3-\) }
#		 { ECHO [$stime($time())] CTCP $2 from $0 to $1 }
#	}
#

# Timestamp all public and private messages and actions
#
on ^PUBLIC * ECHO [$Z] [$rjustify(16 $0)] $2-
on ^SEND_PUBLIC * ECHO [$Z] [$rjustify(16 $N)] $1-

on ^ACTION * if ( ischannel($1) )
	{ ECHO [$Z] $rjustify(18 $0) $2- }
	{ ECHO [$Z] * << $rjustify(13 $0) $2- }
on ^SEND_ACTION * if ( ischannel($0) )
	{ ECHO [$Z] $rjustify(18 $N) $1- }
	{ ECHO [$Z] *    $rjustify(12 $0)* $N $1- }

on ^MSG * ECHO [$Z] * << $rjustify(12 $0)* $1-
on ^SEND_MSG * ECHO [$Z] *    $rjustify(12 $0)* $1-

on ^NOTICE * ECHO [$Z] -$0\- $1-
on ^SEND_NOTICE * ECHO [$Z] -> -$0\- $1-

# Non-customized named events.
#
# WHOREPLY
# PRIVMSG
# NAMREPLY
# CHANNEL
# MSG
# QUIT
# WALL
# WALLOPS
# LINREPLY
# PING
# TOPIC
# PONG
# INVITE
# NICK
# KILL
# MODE
# ERROR
# ERROR:


# Unnamed events
#
# 001  RPL_WELCOME
# 002  RPL_YOURHOST
# 004  RPL_MYINFO
# 219  RPL_ENDOFSTATS
# 221  RPL_UMODEIS
# 232  RPL_ENDOFSERVICES
# 235  RPL_SERVLISTEND
# 242  RPL_STATSUPTIME
# 251  RPL_LUSERCLIENT
# 301  RPL_AWAY
# 302  RPL_USERHOST
# 303  RPL_ISON
# 311  RPL_WHOISUSER
# on ^311 * ECHO [%Z] $0-


# 312  RPL_WHOISSERVER
# 313  RPL_WHOISOPERATOR
# 314  RPL_WHOWASUSER
# 315  RPL_ENDOFWHO
# 316  RPL_WHOISCHANOP
# 317  RPL_WHOISIDLE
# 318  RPL_ENDOFWHOIS
# 319  RPL_WHOISCHANNELS
# 321  RPL_LISTSTART
# 322  RPL_LIST
# 323  RPL_LISTEND
# 324  RPL_CHANNELMODEIS
# 332  RPL_TOPIC
# 341  RPL_INVITING
# 351  RPL_VERSION
# 352  RPL_WHOREPLY
# 353  RPL_NAMREPLY
# 363  RPL_CLOSEEND
# 364  RPL_LINKS
# 365  RPL_ENDOFLINKS
# 366  RPL_ENDOFNAMES
# 368  RPL_ENDOFBANLIST
# 369  RPL_ENDOFWHOWAS
# 372  RPL_MOTD
# 374  RPL_ENDOFINFO
# 375  RPL_MOTDSTART
# 376  RPL_ENDOFMOTD
# 376  RPL_ENDOFMOTD
# 381  RPL_YOUREOPER
# 384  RPL_MYPORTIS
# 385  RPL_NOTOPERANYMORE
# 394  RPL_ENDOFUSERS
# 401  ERR_NOSUCHNICK
# 403  ERR_NOSUCHCHANNEL
# 421  ERR_UNKNOWNCOMMAND
# 432  ERR_ERRONEUSNICKNAME
# 432  ERR_ERRONEUSNICKNAME
# 433  ERR_NICKNAMEINUSE
# 437  ERR_UNAVAILRESOURCE
# 451  ERR_NOTREGISTERED
# 462  ERR_ALREADYREGISTRED
# 463  ERR_NOPERMFORHOST
# 464  ERR_PASSWDMISMATCH
# 465  ERR_YOUREBANNEDCREEP
# 471  ERR_CHANNELISFULL
# 471  ERR_CHANNELISFULL
# 473  ERR_INVITEONLYCHAN
# 473  ERR_INVITEONLYCHAN
# 474  ERR_BANNEDFROMCHAN
# 474  ERR_BANNEDFROMCHAN
# 475  ERR_BADCHANNELKEY
# 475  ERR_BADCHANNELKEY
# 476  ERR_BADCHANMASK
# 476  ERR_BADCHANMASK
# 484  ERR_RESTRICTED

